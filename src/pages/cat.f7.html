<template>
  <div class="page" data-name="cat">
    <div class="navbar ">
      <div class="navbar-inner sliding ourthemeB">
        <div class="left">
          <a  href="#" class="link back">
            <i class="icon icon-back"></i>
            <span class="ios-only">Baaaaaaaaack</span>
          </a>
        </div>
        <div id="toph3ader" class="title"></div>
      </div>
    </div>
    <div class="page-content">
      <div class="block-title header" id="myheader" ></div>
      <div class="block" id="catbesk">

      </div>
<div class="list accordion-list">
  <ul class="ourthemeB">
      {{#each cat.meny}}

      <li id="scr{{rettID}}" class="accordion-item"> <div class="item-content item-link">
             <div class="item-inner">
               <div id="title{{rettID}}" class="item-title">{{navn}}</div>
<a id="bi{{rettID}}"  class="green"></a>
             </div></div>
           <div class="accordion-item-content">
             <div class="block">
               <p>Pris: {{prisw}}<p></p> <p> {{besk}}</p>
               <div class="buyBTNS">
                 <a  name="0" class="thisclass hide" id="B{{rettID}}"></a>
                 <input id="K{{rettID}}" type="number" name="quantity" min="1" max="99" value="1">
                 <div id="atributes" class="">

                   <div id="att2{{rettID}}" class="hides{{atrib}}">
  <p> <label class="radio"><input type="radio" value="Sterk" name="{{rettID}}-radio-inline"><i class="icon-radio"></i></label>  Sterk </p>
  <p> <label class="radio"><input id="styrk{{rettID}}" type="radio" value="Medium" name="{{rettID}}-radio-inline" checked><i class="icon-radio"></i></label>  Medium </p>
  <p> <label class="radio"><input type="radio" value="Mild" name="{{rettID}}-radio-inline"><i class="icon-radio"></i></label>  Mild </p>
</div>
                 </div>
                 <textarea id="T{{rettID}}" name="name" rows="3" cols="20" placeholder="Ekstra infromsasjon"></textarea>
                 <button class="ourbutton" id="Btn{{rettID}}" onclick="addToOrder({{rettID}},{{prisw}},{{atrib}})">Legg til i bestilling</button>

               </div>
             </div>
           </div>
         </li>

{{/each}}
</ul>
</div>
    </div>
    <script type="text/javascript">
    //  alert('here am i');
//  document.onload=luckyS();
//console.log(aktivKatt);
doheaders(catname,restname,loremips);
console.log(cat);
function doheaders(a,b,c){
  document.getElementById("myheader").innerHTML =a;
  document.getElementById("toph3ader").innerHTML = b;
  document.getElementById("catbesk").innerHTML = c;
  amountInOrder();
}
//var restname="";
function restNavn(bb){
//  document.getElementById("toph3ader").innerHTML = bb;
restname=bb;
  console.log(bb);
  console.log("Did navheader name");
}
  function luckyS (aa){
    catname = aa;
//document.getElementById("myheader").innerHTML = aa;
//console.log(aktivKatt);
console.log(aa);
console.log("Did header name");
setTimeout(waitbit, 500);
}
function waitbit(){
  console.log(catname);
//document.getElementById("myheader").innerHTML =catname;
}
  // console.log(eval("orderlist"+activeResturant));
   if (activeResturant){
amountInOrder();
   }
function amountInOrder(){
  var x = document.getElementsByClassName("thisclass");
var i;
for (i = 0; i < x.length; i++) {
  x[i].name= 0;
  }
  var thevar = "orderlist"+activeResturant;
  console.log("acmy nue FUNK onload");
     console.log(eval(thevar));
     let myPicks = eval(thevar);
 myPicks.forEach(fillList);
}
   function fillList(list){
     console.log(list[1]);
     if (list[2]>0 && list[0]==={{hat}}){
       console.log("iwuz here");
       document.getElementById(eval(`"B${list[1]}"`)).classList.remove("hide");
     let mediumVal = document.getElementById(eval(`"B${list[1]}"`)).name;
     console.log(mediumVal);
     let calcVal = parseInt(mediumVal);
     let newVal = calcVal + list[2];
     console.log(newVal);
      document.getElementById(eval(`"B${list[1]}"`)).name = newVal;
//document.getElementById(eval(`"B${list[1]}"`)).innerHTML = newVal;
document.getElementById(eval(`"bi${list[1]}"`)).innerHTML= " Antall i bestilling:  "+newVal;
//document.getElementById(eval(`"bi${list[1]}"`)).classList.add("marginer");
}
//document.getElementById(eval(`"bi${list[1]}"`)).classList.remove(hide);
   }
//console.log({{cat[0]}});
//var orderlist= [];
var ord3rlist{{hat}}= "the super var is here";
function createshortsum(){
  console.log("creating short sum");
    document.getElementById("ordersumshort").innerHTML="";
    let orders =  eval("orderlist"+activeResturant);
    let aoc = 0;
    let fler = "";
    var i;
    for (i = 0; i < orders.length; i++) {
    aoc += orders[i][2];
      }
      if (aoc>0){
      if (aoc>1){fler = "er";}
      let myP = document.createElement("P");
      myP.innerHTML = `Du har ${aoc} rett${fler} i handlekurven`;
      document.getElementById("ordersumshort").appendChild(myP);
      document.getElementById("visbill").classList.remove("showme");
    }
    else{console.log("Havent picked yet");}
}
      function addToOrder(info,pris,atrib){
        document.getElementById('title'+info).click();
        console.log("didit");
        console.log("011called");
        console.log(activeResturant+'active');
      //  alert({{cat}});
        console.log(info);
        let theatribs = `_`;
        if(atrib){
        console.log(atrib);
if (atrib===1){
        let att = document.querySelector('input[name="'+info+'-radio-inline"]:checked').value;
        theatribs = `Styrke: ${att} `;
}
} else if (!atrib){
  console.log("ingen attrib");
          let theatribs = `_`;
}
      //  let stregth1 = document.getElementById('att1'+info).checked;
  //      if (stregth1===true){
  //      let stregth = document.querySelector('input[id="att1'+info+'"]:checked').value;
        console.log("if 01 ???");
        let verdia = document.getElementById('K'+info).value;
        let bTekst = document.getElementById('T'+info).value;
        let bTitle = document.getElementById('title'+info).innerHTML;
    //    console.log(att);
    //    console.log(stregth1);
  //      if (stregth1===true){
      //     let stregth = document.querySelector('input[id="att1'+info+'"]:checked').value;
  //               console.log("if 0222222 ???");
  //      console.log(stregth);
  //      andre = stregth;
  //    }
        console.log(bTekst);
        console.log(verdia);
        let verdi = parseInt(verdia);
      console.log(verdi);
      let myHat = {{hat}};
    //  let theatribs = `Styrke: ${att} <br> Andre valg: ${andre}`;
      console.log(myHat+"her er asdasdasdsa");
      let orderLine = [myHat,info,verdi,pris,bTekst,bTitle,theatribs,activeResturant,aRName];
var thevar = "orderlist"+activeResturant;

window.app.methods.addToOrder(orderLine);

console.log(eval(thevar));
//console.log(thevar);
//console.log(orderlist+activeResturant);
      eval("orderlist"+activeResturant).push(orderLine);
    /*  let myPicks = eval(thevar);
      document.getElementsByClassName("thisclass").name = "0";
      myPicks.forEach(fillList);*/
      console.log(eval(thevar));
      createshortsum();
      amountInOrder();
      document.getElementById('K'+info).value = 1;
      document.getElementById('T'+info).value = "";
    //  document.getElementById('att1'+info).checked = false;
      document.getElementById('styrk'+info).checked = true;
      }
    </script>
    <script src="myJS.js" charset="utf-8"></script>
    <script src="../js/online.js" charset="utf-8"></script>
  </div>
</template>
<script>
  export default {
    data: function () {
      var catiId = this.$route.params.id;
      var currentMeny;
      this.$root.menye.forEach(function (menye) {
        if (menye.id === catiId) {
          currentMeny = menye;
        }
      });
      return {
        cat: currentMeny,
        hat: currentMeny.id,
      };
    }
  };
  /* import * as javacode from '../js/online.js';
  export default {
    data: function () {
        var id = this.$route.params.id;
      return {
        cat: this.$root.categori+id,
      };
    }
  };
  export default {
    data: function () {
      var Id = this.$route.params.id;
      var currentResturant;
      this.$root.categori+Id.forEach(function (resturant) {
        if (resturant.id === resturantId) {
          currentResturant = resturant;
        }
      });
      return {
        cat: currentResturant.categorier,
      };
    }
  };*/
</script>