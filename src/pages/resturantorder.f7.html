<template>
  <div class="page" data-name="buy">
    <div class="navbar ourthemeB">
      <div class="navbar-inner sliding ourthemeB">
        <div class="left">
          <a href="#" class="link back">
            <i class="icon icon-back"></i>
            <span class="ios-only"></span>
          </a>
        </div>
        <div id="restHead" class="title ourthemeB">Bestiller fra {{resturant.title}}</div>
      </div>
    </div>
    <div class="page-content ourthemeB">
        <div style="background-image:url({{resturant.img}})" class="card-header align-items-flex-end restIMG"></div>
      <div class="block-title">{{resturant.adresse}}</div>
      <div class="block block-strong">
        {{resturant.description}}
      </div>  <div id="biller2" class="">

      </div><button class="ourbutton" onclick="showtheBill()" href="#" type="button" name="button"> Pay</button>
<div class="list accordion-list ourthemeB">
    <ul id="regning">

                  </ul>
        </div>
    </div>
    <script type="text/javascript">
    //  console.log(ord3rlist1);
  //  var aktivKatt;
    function activeCAT(cat,hound){
      console.log(cat);
      console.log(hound);
      console.log(`"${cat.name}"`);
      console.log(`${cat.name}`);
      console.log("Creating categoryheader");
      let link = `/cat/${hound}/`;
    //  var aktivKa = eval(cat);
    //  var aktivKatt = aktivKa;
      console.log(cat);
      console.log(link);
    //  setTimeout(luckyS(`${cat}`), 1100);
    //  restNavn("{{resturant.title}}");
      //window.href = link;

      var catname= `${cat}`;
      var restname=document.getElementById("restHead").innerHTML;
        doheaders(catname,restname);
      console.log(catname);
      console.log(restname);
    }

    console.log({{resturant.id}});
    var activeResturant = {{resturant.id}};
      console.log("hei Resturant");
      if (!orderlist{{resturant.id}}){
        var orderlist{{resturant.id}} = [];
        console.log("madeODERLIST");
      }
 //var thevar = orderlist+{{resturant.id}}

//console.log(orderlist{{resturant.id}});
function showtheBill(){
    document.getElementById("biller").innerHTML = "";
  let theList = orderlist{{resturant.id}};
  console.log(theList);
  let orderSum = 0;
  for (a=0; a<theList.length; a++){
    let sum=theList[a][2]*theList[a][3];
    let text = theList[a][4];
  var element = document.createElement("li");
  element.classList += "accordion-item";
  element.innerHTML = `
  <a href="" class="item-link item-content">
      <div class="item-inner">
          <div class="item-title">${theList[a][5]}</div>
          <div class="">
            <a> Antall: ${theList[a][2]}</a><a>  Sum: ${sum}</a>
          </div>
      </div>
  </a>
  <div class="accordion-item-content"><p>Information: </p><p> ${text}</p></div>
`;
  orderSum+=sum;
  document.getElementById("biller2").appendChild(element);
  <li class="accordion-item">

  </li>

}
//[myHat,info,verdi,pris,bTekst,bTitle];<a> Kategori: ${theList[a][0]}   </a><a>Meny element: ${theList[a][1]}</a><a> Antall: ${theList[a][2]}</a><a>  Sum: ${sum}</a>




let totalSum = document.createElement("div");
totalSum.innerHTML = `Total: ${orderSum}`;
  document.getElementById("biller").appendChild(totalSum);
}
showtheBill();
    </script>
  </div>
</template>
<script>
  export default {
    data: function () {
      var resturantId = this.$route.params.id;
      var currentResturant;
      this.$root.resturants.forEach(function (reyturant) {
        if (reyturant.id === resturantId) {
          currentResturant = reyturant;
        }
      });
      return {
        resturant: currentResturant,
      };
    }
  };
</script>
